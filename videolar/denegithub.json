{
  "name": "denegithub",
  "nodes": [
    {
      "parameters": {
        "functionCode": "// Prompt se√ß\n// Prompt se√ß - 100 FARKLI √áOCUK MASALI PROMPT'U\nconst prompts = [\n  // HAYVAN MASALLARI (30 adet)\n  \"Bir zamanlar k√º√ß√ºk bir ayƒ±\",\n  \"Bir zamanlar sevimli bir tav≈üan\",\n  \"Bir zamanlar meraklƒ± bir sincap\",\n  \"Bir zamanlar cesur bir kaplumbaƒüa\",\n  \"Bir zamanlar ≈üarkƒ± s√∂yleyen bir ku≈ü\",\n  \"Bir zamanlar utanga√ß bir kirpi\",\n  \"Bir zamanlar oyunbaz bir kedi yavrusu\",\n  \"Bir zamanlar bilge bir bayku≈ü\",\n  \"Bir zamanlar hƒ±zlƒ± bir ceylan\",\n  \"Bir zamanlar renkli bir kelebek\",\n  \"Bir zamanlar g√º√ßl√º bir aslan yavrusu\",\n  \"Bir zamanlar ne≈üeli bir penguen\",\n  \"Bir zamanlar sihirli bir tilki\",\n  \"Bir zamanlar minik bir fare\",\n  \"Bir zamanlar parlak bir ate≈ü b√∂ceƒüi\",\n  \"Bir zamanlar y√ºzen bir balina\",\n  \"Bir zamanlar zƒ±playan bir kanguru\",\n  \"Bir zamanlar rengarenk bir papaƒüan\",\n  \"Bir zamanlar yumu≈üak bir kuzu\",\n  \"Bir zamanlar yaramaz bir k√∂pek yavrusu\",\n  \"Bir zamanlar b√ºy√ºk kulaklƒ± bir fil\",\n  \"Bir zamanlar √ßizgili bir zebra\",\n  \"Bir zamanlar uzun boyunlu bir z√ºrafa\",\n  \"Bir zamanlar t√ºyl√º bir bayku≈ü\",\n  \"Bir zamanlar y√ºzen bir √∂rdek\",\n  \"Bir zamanlar tƒ±rmanan bir maymun\",\n  \"Bir zamanlar yeraltƒ±nda ya≈üayan bir k√∂stebek\",\n  \"Bir zamanlar g√∂lde ya≈üayan bir kurbaƒüa\",\n  \"Bir zamanlar ormanda ya≈üayan bir geyik\",\n  \"Bir zamanlar karlƒ± daƒülarda ya≈üayan bir panda\",\n  \n  // FANTASTƒ∞K YARATIKLAR (25 adet)\n  \"Bir zamanlar k√º√ß√ºk bir ejderha\",\n  \"Bir zamanlar ≈üefkatli bir peri\",\n  \"Bir zamanlar konu≈üan bir aƒüa√ß\",\n  \"Bir zamanlar sihirli bir tek boynuzlu at\",\n  \"Bir zamanlar ƒ±≈üƒ±k sa√ßan bir yƒ±ldƒ±z √ßocuƒüu\",\n  \"Bir zamanlar bulutlarda ya≈üayan bir dev\",\n  \"Bir zamanlar g√∂kku≈üaƒüƒ± renklerinde bir anka ku≈üu\",\n  \"Bir zamanlar denizlerin prensi bir deniz kƒ±zƒ±\",\n  \"Bir zamanlar kristallerden olu≈üan bir yaratƒ±k\",\n  \"Bir zamanlar r√ºzgarla konu≈üan bir √ßocuk\",\n  \"Bir zamanlar ay ƒ±≈üƒ±ƒüƒ±ndan doƒüan bir tilki\",\n  \"Bir zamanlar yaƒümur damlalarƒ±yla oynayan bir cin\",\n  \"Bir zamanlar gecenin koruyucusu bir bayku≈ü prenses\",\n  \"Bir zamanlar ormanƒ±n sihirli bek√ßisi\",\n  \"Bir zamanlar √ßi√ßeklerle konu≈üan bir kƒ±z\",\n  \"Bir zamanlar yƒ±ldƒ±z tozuyla beslenen bir kelebek\",\n  \"Bir zamanlar bulutlardan oyuncak yapan bir dev\",\n  \"Bir zamanlar g√ºne≈ü ƒ±≈üƒ±nlarƒ±nƒ± saklayan bir √ßocuk\",\n  \"Bir zamanlar mevsimleri deƒüi≈ütiren bir peri\",\n  \"Bir zamanlar hayvanlarla konu≈üabilen bir ≈üaman\",\n  \"Bir zamanlar r√ºyalarƒ± y√∂neten bir ayƒ±cƒ±k\",\n  \"Bir zamanlar renkleri icat eden bir ressam\",\n  \"Bir zamanlar m√ºziƒüi ke≈üfeden bir ku≈ü\",\n  \"Bir zamanlar dans eden aƒüa√ßlarƒ±n olduƒüu bir orman\",\n  \"Bir zamanlar ≈üekerlemeden bir kale\",\n  \n  // MESAJ ƒ∞√áEREN MASALLAR (20 adet)\n  \"Bir zamanlar payla≈ümayƒ± seven bir √ßocuk\",\n  \"Bir zamanlar d√ºr√ºstl√ºƒü√º √∂ƒürenen bir sincap\",\n  \"Bir zamanlar sabrƒ± ke≈üfeden bir kaplumbaƒüa\",\n  \"Bir zamanlar yardƒ±mla≈ümanƒ±n g√ºc√ºn√º g√∂ren bir ayƒ±\",\n  \"Bir zamanlar √∂z√ºr dilemeyi √∂ƒürenen bir tav≈üan\",\n  \"Bir zamanlar korkularƒ±nƒ± yenmeye √ßalƒ±≈üan bir fare\",\n  \"Bir zamanlar arkada≈ülƒ±ƒüƒ±n deƒüerini anlayan bir kurt\",\n  \"Bir zamanlar temizliƒüi seven bir kirpi\",\n  \"Bir zamanlar kitap okumayƒ± seven bir bayku≈ü\",\n  \"Bir zamanlar hayal kurmanƒ±n g√ºc√ºn√º ke≈üfeden bir √ßocuk\",\n  \"Bir zamanlar minnettarlƒ±ƒüƒ± √∂ƒürenen bir ku≈ü\",\n  \"Bir zamanlar empati kuran bir fil\",\n  \"Bir zamanlar farklƒ±lƒ±klarƒ± kucaklayan bir z√ºrafa\",\n  \"Bir zamanlar sorumluluk alan bir k√∂pek\",\n  \"Bir zamanlar √ßevreyi koruyan bir sincap\",\n  \"Bir zamanlar enerjisini iyi kullanan bir maymun\",\n  \"Bir zamanlar duygularƒ±nƒ± ifade eden bir ayƒ±cƒ±k\",\n  \"Bir zamanlar problem √ß√∂zmeyi seven bir kunduz\",\n  \"Bir zamanlar takƒ±m √ßalƒ±≈ümasƒ±nƒ± √∂ƒürenen bir karƒ±nca\",\n  \"Bir zamanlar azmin g√ºc√ºn√º g√∂steren bir √∂r√ºmcek\",\n  \n  // MACERA DOLU MASALLAR (15 adet)\n  \"Bir zamanlar hazine arayan bir korsan √ßocuk\",\n  \"Bir zamanlar uzayƒ± ke≈üfeden bir astronot ayƒ±\",\n  \"Bir zamanlar zaman yolculuƒüu yapan bir saat\",\n  \"Bir zamanlar kayƒ±p ≈üehri bulan bir ka≈üif\",\n  \"Bir zamanlar gizemli bir haritayƒ± √ß√∂zen bir √ßocuk\",\n  \"Bir zamanlar volkanƒ±n tepesine tƒ±rmanan bir daƒücƒ±\",\n  \"Bir zamanlar okyanusun derinliklerini ke≈üfeden bir denizaltƒ±\",\n  \"Bir zamanlar maƒüaralarda hazine arayan bir yarasa\",\n  \"Bir zamanlar bulutlarƒ±n √ºst√ºnde ya≈üayan bir pilot\",\n  \"Bir zamanlar yaƒümur ormanlarƒ±nƒ± gezen bir gezgin\",\n  \"Bir zamanlar kutuplarƒ± ke≈üfeden bir penguen\",\n  \"Bir zamanlar √ß√∂lde vaha arayan bir deve\",\n  \"Bir zamanlar nehirler boyunca yolculuk yapan bir sal\",\n  \"Bir zamanlar yeraltƒ± t√ºnellerini ke≈üfeden bir k√∂stebek\",\n  \"Bir zamanlar daƒülarda kayƒ±p bir k√∂y bulan bir daƒü ke√ßisi\",\n  \n  // SEVGƒ∞ VE DUYGU MASALLARI (10 adet)\n  \"Bir zamanlar sevgiyi yaymaya √ßalƒ±≈üan bir kalp\",\n  \"Bir zamanlar mutluluƒüu arayan bir g√ºne≈ü ƒ±≈üƒ±nƒ±\",\n  \"Bir zamanlar ne≈üeyi √ßoƒüaltan bir g√∂kku≈üaƒüƒ±\",\n  \"Bir zamanlar barƒ±≈üƒ± saƒülayan bir g√ºvercin\",\n  \"Bir zamanlar umudu temsil eden bir yƒ±ldƒ±z\",\n  \"Bir zamanlar arkada≈ülƒ±ƒüƒ± bulan bir yalnƒ±z √ßocuk\",\n  \"Bir zamanlar aile baƒülarƒ±nƒ± g√º√ßlendiren bir yuva\",\n  \"Bir zamanlar g√ºveni kazanan bir kurt\",\n  \"Bir zamanlar affetmeyi √∂ƒürenen bir aslan\",\n  \"Bir zamanlar minnettarlƒ±k duyan bir √ßi√ßek\"\n];\nconst prompt = prompts[Math.floor(Math.random() * prompts.length)];\n\nconsole.log(`üéØ Prompt: ${prompt}`);\n\nreturn [{\n  json: {\n    prompt: prompt,\n    text: \"\",\n    start_time: Date.now(),\n    check_count: 0\n  }\n}];"
      },
      "id": "cdc45b02-4d77-428f-9215-2aef553cb322",
      "name": "üìù Prompt Se√ß",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -3840,
        32
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://simple-colab-proxy-production.up.railway.app/generate",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"prompt\": \"{{$json.prompt}}\",\n  \"text\": \"{{$json.text}}\"\n}",
        "options": {
          "response": {
            "response": {
              "neverError": true
            }
          },
          "timeout": 30000
        }
      },
      "id": "3c1003ad-2682-4d07-b2d8-3465176cd5af",
      "name": "üåê Colab'a G√∂nder",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4,
      "position": [
        -3616,
        32
      ]
    },
    {
      "parameters": {
        "functionCode": "// Job ID'yi AL ve SAKLA\nconst response = $input.all()[0].json;\nconsole.log('üì• Colab yanƒ±tƒ±:', JSON.stringify(response, null, 2));\n\nlet jobId = response?.job_id || 'job_' + Date.now();\n\nconsole.log(`‚úÖ Job ID: ${jobId}`);\n\nreturn [{\n  json: {\n    ...$json,\n    job_id: jobId,\n    final_job_id: jobId,\n    current_status: 'processing',\n    last_check: Date.now()\n  }\n}];"
      },
      "id": "f732ce6c-bc79-408c-9e02-a0377d00f017",
      "name": "üîê Job ID Al ve Sakla",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -2944,
        32
      ]
    },
    {
      "parameters": {
        "functionCode": "const jobData = $json;\nconst checkNum = jobData.check_count + 1;\nconsole.log(`\\nüîÑ D√ñNG√ú #${checkNum} - Job: ${jobData.job_id}`);\nconsole.log(`   Kontrol: ${checkNum}/40`);\nreturn [{\n  json: {\n    ...jobData,\n    check_count: checkNum\n  }\n}];"
      },
      "id": "aa51dbfe-20b2-4cc9-90cc-b095aa66d878",
      "name": "üîÑ D√∂ng√º Kontrol",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -2720,
        32
      ]
    },
    {
      "parameters": {
        "amount": 30,
        "unit": "seconds"
      },
      "id": "7f8da718-e2ad-4f81-acad-1af0336fae91",
      "name": "‚è≥ 30sn Bekle",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1,
      "position": [
        -2496,
        -48
      ],
      "webhookId": "bc8166bd-9f8f-4d2b-968d-5e924a728ef4"
    },
    {
      "parameters": {
        "functionCode": "const jobData = $json;\nconsole.log(`üì° Status kontrol: ${jobData.job_id}`);\nreturn [{ json: jobData }];"
      },
      "id": "10d9a33b-6137-4187-93d1-ac9291ccb85c",
      "name": "üîç Status √ñncesi",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -2272,
        -48
      ]
    },
    {
      "parameters": {
        "url": "={{ 'https://simple-colab-proxy-production.up.railway.app/status/' + $json.job_id }}",
        "options": {
          "timeout": 30000
        }
      },
      "id": "13167182-4534-4238-b402-1bb00130513b",
      "name": "üåê Status Kontrol",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4,
      "position": [
        -2048,
        -48
      ]
    },
    {
      "parameters": {
        "functionCode": "// \"üß† Status Analiz\" node'unun TAMAMI - D√úZELTƒ∞LDƒ∞!\nconst statusResponse = $input.all()[0].json;\nconst jobData = $json;\n\nconsole.log(`\\nüìä STATUS ANALƒ∞Z #${jobData.check_count}`);\nconsole.log(`   Job: ${jobData.job_id}`);\n\nconst status = statusResponse?.status || 'unknown';\n\n// 1. Vƒ∞DEO HAZIR MI?\nif (status === 'completed') {\n  console.log('‚úÖ‚úÖ‚úÖ Vƒ∞DEO HAZIR!');\n  \n  // ‚≠ê‚≠ê‚≠ê BURAYI D√úZENLEDƒ∞M - title, tags, description EKLEDƒ∞M! ‚≠ê‚≠ê‚≠ê\n  return [{\n    json: {\n      success: true,\n      video_ready: true,\n      colab_result: statusResponse,\n      drive_path: statusResponse.result?.drive_info?.video_path,\n      continue_loop: false,\n      final_message: '‚úÖ Video hazƒ±r!',\n      has_youtube_info: !!statusResponse.result?.youtube_info,\n      \n      // YouTube metadata - DOƒûRUDAN statusResponse'dan!\n      youtube_title: statusResponse.result?.youtube_info?.title,\n      title: statusResponse.result?.youtube_info?.title,           // ‚úÖ EKLENDƒ∞!\n      tags: statusResponse.result?.youtube_info?.tags,            // ‚úÖ EKLENDƒ∞!\n      description: statusResponse.result?.youtube_info?.description, // ‚úÖ EKLENDƒ∞!\n      category: statusResponse.result?.youtube_info?.category || \"22\", // ‚úÖ EKLENDƒ∞!\n      \n      // Linkler\n      json_link: statusResponse.result?.youtube_info?.json_download_link,\n      video_link: statusResponse.result?.youtube_info?.drive_download_link\n    }\n  }];\n}\n\n// 2. HATA MI? (DEƒûƒ∞≈ûƒ∞KLƒ∞K YOK)\nif (status === 'failed' || statusResponse?.error) {\n  console.log('‚ùå HATA:', statusResponse?.error);\n  return [{\n    json: {\n      success: false,\n      error: statusResponse?.error || 'Hata',\n      continue_loop: false\n    }\n  }];\n}\n\n// 3. ZAMAN A≈ûIMI MI? (DEƒûƒ∞≈ûƒ∞KLƒ∞K YOK)\nconst elapsed = (Date.now() - jobData.start_time) / 1000 / 60;\nif (elapsed > 20) {\n  console.log('‚è∞ Zaman a≈üƒ±mƒ± (20 dakika)');\n  return [{\n    json: {\n      success: false,\n      error: '20 dakika ge√ßti',\n      continue_loop: false\n    }\n  }];\n}\n\n// 4. MAKSIMUM KONTROL SAYISI? (DEƒûƒ∞≈ûƒ∞KLƒ∞K YOK)\nif (jobData.check_count >= jobData.max_checks) {\n  console.log('üõë Maksimum kontrol (40 kez)');\n  return [{\n    json: {\n      success: false,\n      error: '40 kontrol yapƒ±ldƒ±',\n      continue_loop: false\n    }\n  }];\n}\n\n// 5. DEVAM EDƒ∞YOR (DEƒûƒ∞≈ûƒ∞KLƒ∞K YOK)\nconsole.log(`‚è≥ Devam ediyor...`);\nreturn [{\n  json: {\n    ...jobData,\n    current_status: status,\n    continue_loop: true\n  }\n}];"
      },
      "id": "a4ae16de-d0ec-408b-9505-d36ebe425de6",
      "name": "üß† Status Analiz",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -1824,
        -48
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 1
          },
          "conditions": [
            {
              "id": "b0c1d627-47fd-4bba-b7ce-798280025e7f",
              "leftValue": "={{$json.continue_loop}}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {
          "looseTypeValidation": true
        }
      },
      "id": "d97fd629-936c-402e-b287-e65a3eb1de83",
      "name": "‚Ü™Ô∏è Devam?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -1600,
        32
      ]
    },
    {
      "parameters": {
        "functionCode": "// ‚úÖ Video Hazƒ±r! - D√úZELTƒ∞LMƒ∞≈û\nconst inputData = $input.first().json;\n\nconsole.log('üé¨ VIDEO HAZIR! D√∂ng√º durdu.');\nconsole.log('Drive path:', inputData.drive_path);\n\nreturn [{ json: inputData }];"
      },
      "id": "f7482a78-58e1-40bf-8f27-9af3e150f83e",
      "name": "‚úÖ Video Hazƒ±r!",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -1376,
        32
      ]
    },
    {
      "parameters": {
        "functionCode": "// GET LINKS - YouTube i√ßin - D√úZELTƒ∞LDƒ∞!\nconst input = $input.first().json;\n\nconsole.log('üîó YouTube i√ßin linkleri hazƒ±rlƒ±yorum...');\nconsole.log('‚úÖ Gelen ba≈ülƒ±k:', input.title || input.youtube_title);\nconsole.log('‚úÖ Gelen video_link:', input.video_link);\nconsole.log('‚úÖ Gelen tags:', input.tags ? input.tags.length + ' adet' : 'YOK');\n\nif (!input.video_link || !input.json_link) {\n  throw new Error(`Link eksik! Video: ${input.video_link}, JSON: ${input.json_link}`);\n}\n\nreturn [{\n  json: {\n    // Linkler\n    json_download_url: input.json_link,\n    video_download_url: input.video_link,\n    \n    // ‚≠ê‚≠ê‚≠ê DOƒûRUDAN Status Analiz'den GELEN VERƒ∞LER ‚≠ê‚≠ê‚≠ê\n    title: input.title || input.youtube_title || \"Masal Videosu\",\n    description: input.description || \"√áocuklar i√ßin eƒülenceli ve √∂ƒüretici masal\",\n    tags: input.tags || [\"√ßocuk masalƒ±\", \"masal\", \"hikaye\"],\n    category: input.category || \"22\",\n    \n    // Original data\n    original_data: input,\n    message: \"üöÄ YouTube'a y√ºklenmeye hazƒ±r!\",\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "36a84043-ace2-433b-9d91-0419bb1f97cf",
      "name": "JSON Metadata Al",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -1152,
        32
      ]
    },
    {
      "parameters": {
        "functionCode": "// üì¶ YouTube metadata hazƒ±rla - 4 kanal i√ßin!\nconst inputData = $input.all()[0].json;\n\nconsole.log('üì¶ YouTube metadata hazƒ±rlanƒ±yor...');\nconsole.log('‚úÖ Ba≈ülƒ±k:', inputData.title);\nconsole.log('‚úÖ Video URL:', inputData.video_download_url);\n\nif (!inputData.video_download_url) {\n    throw new Error('‚ùå video_download_url bulunamadƒ±!');\n}\n\nconst videoMetadata = {\n    video_download_url: inputData.video_download_url,\n    title: inputData.title || \"Masal Videosu\",\n    description: inputData.description || \"√áocuklar i√ßin eƒülenceli ve √∂ƒüretici masal\",\n    tags: inputData.tags || [\"√ßocuk masalƒ±\", \"masal\", \"hikaye\"],\n    categoryId: inputData.category || \"22\",\n    privacyStatus: \"public\",\n    job_id: inputData.job_id || Date.now().toString(),\n    prompt: inputData.prompt\n};\n\nconsole.log('üé¨ Video hazƒ±r, 4 kanala y√ºklenecek!');\nconsole.log('   üìå', videoMetadata.title);\n\nreturn [{ json: videoMetadata }];"
      },
      "id": "3dec95aa-0628-405e-9dc3-55b5e8b08923",
      "name": "YouTube Verileri Hazƒ±rla",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -928,
        32
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 1
          },
          "conditions": [
            {
              "id": "b0c1d627-47fd-4bba-b7ce-798280025e7f",
              "leftValue": "={{$json.continue_loop}}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {
          "looseTypeValidation": true
        }
      },
      "id": "e2b824be-d7ad-4599-8550-c681423704d6",
      "name": "‚Ü™Ô∏è Devam?1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -3168,
        32
      ]
    },
    {
      "parameters": {
        "functionCode": "// üîÑ Hata Kontrol - SAKƒ∞N! Saya√ßla i≈üin yok!\nconst response = $input.first().json;\nconst isError = response.error || response.status === 'error' || !response.job_id;\n\nif (isError) {\n  console.log('‚ùå Hata olu≈ütu! Tekrar dene...');\n  return [{\n    json: {\n      continue_loop: true,  // TRUE ‚Üí D√∂ng√ºye gir!\n      error: response.error || 'Bilinmeyen hata',\n      prompt: $json.prompt,\n      text: $json.text,\n      start_time: $json.start_time,\n      check_count: $json.check_count || 0\n      // üö´ SAKIN! video_counter burada YOK!\n      // üö´ SAKIN! $getWorkflowStaticData burada YOK!\n    }\n  }];\n} else {\n  console.log('‚úÖ Ba≈üarƒ±lƒ±! Job ID alƒ±nƒ±yor...');\n  return [{\n    json: {\n      ...response,\n      continue_loop: false,\n      prompt: $json.prompt,\n      text: $json.text,\n      start_time: $json.start_time,\n      check_count: $json.check_count || 0\n    }\n  }];\n}"
      },
      "id": "f4654dc0-114f-4511-a854-8d32be2a92a0",
      "name": "üîÑ Hata Kontrol",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -3392,
        32
      ]
    },
    {
      "parameters": {
        "jsCode": "// üî¢ Saya√ß Ba≈ülat ve KONTROL ET!\nconst executionData = $getWorkflowStaticData('global');\nexecutionData.counter = executionData.counter || 0;\n\nconst maxVideos = 1; // 1 video sonra dursun\n\nconsole.log(`=================================`);\nconsole.log(`üé¨ Vƒ∞DEO #${executionData.counter + 1}/${maxVideos} √úRETƒ∞Lƒ∞YOR...`);\nconsole.log(`=================================`);\n\n// Eƒüer maxVideos'a ula≈ütƒ±ysak DUR!\nif (executionData.counter >= maxVideos) {\n    console.log(`üéâüéâüéâ ${maxVideos} Vƒ∞DEO TAMAMLANDI! WORKFLOW DURUYOR. üéâüéâüéâ`);\n    return []; // Bo≈ü d√∂nd√ºr, workflow dursun\n}\n\n// Normal video √ºretimine devam\nreturn [{\n    json: {\n        ...$json,\n        video_counter: executionData.counter,\n        max_videos: maxVideos,\n        is_new_video: true\n    }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -4064,
        112
      ],
      "id": "e99c091c-b0e2-4da0-9465-e30c57f2d187",
      "name": "Ana Video D√∂ng√ºs√º"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -4288,
        16
      ],
      "id": "1ac12c7b-a859-4712-9219-32b963a3c4b8",
      "name": "When clicking ‚ÄòExecute workflow‚Äô"
    },
    {
      "parameters": {
        "jsCode": "// üìã MERGE'den GELEN VERƒ∞Yƒ∞ ƒ∞≈ûLE\nconst mergedData = $input.first().json;\n\nconsole.log('üîç MERGE\\'den gelen veri:', mergedData);\n\n// uploadId_1, uploadId_2, uploadId_3, uploadId_4'ten verileri al\nconst uploadResults = [];\n\nfor (let i = 1; i <= 2; i++) {\n    const uploadId = mergedData[`uploadId_${i}`];\n    \n    if (uploadId) {\n        const videoUrl = `https://www.youtube.com/watch?v=${uploadId}`;\n        \n        uploadResults.push({\n            uploadId: uploadId,\n            url: videoUrl,\n            channel: i,\n            success: true\n        });\n        \n        console.log(`‚úÖ Kanal ${i} y√ºklendi: ${videoUrl}`);\n    }\n}\n\nconsole.log(`=================================`);\nconsole.log(`üìä ${uploadResults.length}/2 Kanal Y√ºkleme Tamamlandƒ±`);\nconsole.log(`=================================`);\n\n// T√ºm kanallar ba≈üarƒ±lƒ± mƒ±?\nif (uploadResults.length === 2) {\n    console.log('üéâüéâüéâ 2 KANALA DA Y√úKLEME BA≈ûARILI! üéâüéâüéâ');\n    \n    // SAYACI BURADA ARTIR!\n    const executionData = $getWorkflowStaticData('global');\n    executionData.counter = (executionData.counter || 0) + 1;\n    \n    console.log(`üé¨ TOPLAM ${executionData.counter} Vƒ∞DEO TAMAMLANDI`);\n    console.log(`=================================`);\n    \n    // Max video kontrol√º i√ßin counter'ƒ± da g√∂nder\n    return [{\n        json: {\n            success: true,\n            video_counter: executionData.counter,\n            upload_results: uploadResults,\n            video_links: uploadResults.map(r => r.url),\n            max_videos: 1\n        }\n    }];\n} else {\n    throw new Error(`‚ùå Hata! Sadece ${uploadResults.length}/2 kanal y√ºklendi!`);\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -32,
        32
      ],
      "id": "ca7f5153-07d0-43b4-97fc-a84135aa2859",
      "name": "4 Kanal Kontrol"
    },
    {
      "parameters": {
        "url": "={{$json.video_download_url}}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          },
          "timeout": 180000
        }
      },
      "id": "4318e1f7-5fdd-4762-9485-1259cf29da45",
      "name": "Videoyu ƒ∞ndir",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        -704,
        32
      ]
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {
          "clashHandling": {
            "values": {
              "resolveClash": "addSuffix"
            }
          },
          "includeUnpaired": true
        }
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -256,
        32
      ],
      "id": "2eabea8e-c296-4178-96e8-312a74edfe2a",
      "name": "Merge"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 * * * *"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        -4288,
        208
      ],
      "id": "33e098fd-470d-4ea1-b7a0-bf9566f7d381",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "155BxVIywJmTn_okRjTVqoxjf9XjyQJx4-WoVLf71M_A",
          "mode": "list",
          "cachedResultName": "n8n-youtube-1video-4kanal-linkler",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/155BxVIywJmTn_okRjTVqoxjf9XjyQJx4-WoVLf71M_A/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sayfa1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/155BxVIywJmTn_okRjTVqoxjf9XjyQJx4-WoVLf71M_A/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "link1": "={{$json.video_links[0]}}",
            "link2": "={{$json.video_links[1]}}",
            "link3": "={{$json.video_links[2]}}",
            "link4": "={{$json.video_links[3]}}",
            "video_no": "={{$json.video_counter}}",
            "tarih": "={{$now}}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "link1",
              "displayName": "link1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "link2",
              "displayName": "link2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "link3",
              "displayName": "link3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "link4",
              "displayName": "link4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "video_no",
              "displayName": "video_no",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "tarih",
              "displayName": "tarih",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        192,
        208
      ],
      "id": "859d14d0-4784-4da2-8094-c8c1c2363d0f",
      "name": "Google E-Tablo Y√ºklenen Video Linkleri1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "juJQnpZpSdl5PRMl",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "resource": "video",
        "operation": "upload",
        "title": "={{$json.title}}",
        "regionCode": "TR",
        "categoryId": "={{$json.categoryId}}",
        "options": {
          "defaultLanguage": "tr",
          "description": "={{$json.description}}",
          "embeddable": true,
          "license": "youtube",
          "notifySubscribers": true,
          "privacyStatus": "public",
          "selfDeclaredMadeForKids": true,
          "tags": "={{$json.tags.join(',')}}"
        }
      },
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [
        -480,
        -112
      ],
      "id": "43b7cdef-412b-422d-aae4-61451071d478",
      "name": "viskiey Youtube Y√ºkle",
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "3EvU4DJwhTNabt8m",
          "name": "viskiey"
        }
      }
    },
    {
      "parameters": {
        "resource": "playlistItem",
        "playlistId": "PLLGp8gSEVjhIKlMnwNAOO_QufZLFvEpN8",
        "videoId": "={{$json.uploadId}}",
        "options": {}
      },
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [
        -256,
        -160
      ],
      "id": "ca03b6c7-4752-4ef1-88c1-891e49152cdd",
      "name": "viskiey Playlist Y√ºkle",
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "3EvU4DJwhTNabt8m",
          "name": "viskiey"
        }
      }
    },
    {
      "parameters": {
        "resource": "video",
        "operation": "upload",
        "title": "={{$json.title}}",
        "regionCode": "TR",
        "categoryId": "={{$json.categoryId}}",
        "options": {
          "defaultLanguage": "tr",
          "description": "={{$json.description}}",
          "embeddable": true,
          "license": "youtube",
          "notifySubscribers": true,
          "privacyStatus": "public",
          "selfDeclaredMadeForKids": true,
          "tags": "={{$json.tags.join(',')}}"
        }
      },
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [
        -480,
        176
      ],
      "id": "a3f8a426-027e-4b54-b5d8-1e55bea7a4da",
      "name": "viskiey Youtube Y√ºkle1",
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "3EvU4DJwhTNabt8m",
          "name": "viskiey"
        }
      }
    },
    {
      "parameters": {
        "resource": "playlistItem",
        "playlistId": "PLLGp8gSEVjhIKlMnwNAOO_QufZLFvEpN8",
        "videoId": "={{$json.uploadId}}",
        "options": {}
      },
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [
        -256,
        224
      ],
      "id": "645e8920-e4cb-4339-9ea2-bdddf6432bde",
      "name": "viskiey Playlist Y√ºkle1",
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "3EvU4DJwhTNabt8m",
          "name": "viskiey"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "üìù Prompt Se√ß": {
      "main": [
        [
          {
            "node": "üåê Colab'a G√∂nder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üåê Colab'a G√∂nder": {
      "main": [
        [
          {
            "node": "üîÑ Hata Kontrol",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîê Job ID Al ve Sakla": {
      "main": [
        [
          {
            "node": "üîÑ D√∂ng√º Kontrol",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîÑ D√∂ng√º Kontrol": {
      "main": [
        [
          {
            "node": "‚è≥ 30sn Bekle",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚è≥ 30sn Bekle": {
      "main": [
        [
          {
            "node": "üîç Status √ñncesi",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîç Status √ñncesi": {
      "main": [
        [
          {
            "node": "üåê Status Kontrol",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üåê Status Kontrol": {
      "main": [
        [
          {
            "node": "üß† Status Analiz",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üß† Status Analiz": {
      "main": [
        [
          {
            "node": "‚Ü™Ô∏è Devam?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚Ü™Ô∏è Devam?": {
      "main": [
        [
          {
            "node": "üîÑ D√∂ng√º Kontrol",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "‚úÖ Video Hazƒ±r!",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚úÖ Video Hazƒ±r!": {
      "main": [
        [
          {
            "node": "JSON Metadata Al",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "JSON Metadata Al": {
      "main": [
        [
          {
            "node": "YouTube Verileri Hazƒ±rla",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "YouTube Verileri Hazƒ±rla": {
      "main": [
        [
          {
            "node": "Videoyu ƒ∞ndir",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚Ü™Ô∏è Devam?1": {
      "main": [
        [],
        [
          {
            "node": "üîê Job ID Al ve Sakla",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîÑ Hata Kontrol": {
      "main": [
        [
          {
            "node": "‚Ü™Ô∏è Devam?1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ana Video D√∂ng√ºs√º": {
      "main": [
        [
          {
            "node": "üìù Prompt Se√ß",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‚ÄòExecute workflow‚Äô": {
      "main": [
        [
          {
            "node": "Ana Video D√∂ng√ºs√º",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "4 Kanal Kontrol": {
      "main": [
        [
          {
            "node": "Google E-Tablo Y√ºklenen Video Linkleri1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Videoyu ƒ∞ndir": {
      "main": [
        [
          {
            "node": "viskiey Youtube Y√ºkle",
            "type": "main",
            "index": 0
          },
          {
            "node": "viskiey Youtube Y√ºkle1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "4 Kanal Kontrol",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Ana Video D√∂ng√ºs√º",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google E-Tablo Y√ºklenen Video Linkleri1": {
      "main": [
        [
          {
            "node": "Ana Video D√∂ng√ºs√º",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "viskiey Youtube Y√ºkle": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          },
          {
            "node": "viskiey Playlist Y√ºkle",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "viskiey Youtube Y√ºkle1": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          },
          {
            "node": "viskiey Playlist Y√ºkle1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "versionId": "cbe9e4f0-bd18-4b0b-b40a-6308aff6f930",
  "meta": {
    "instanceId": "e80b8d9f66d0ac426aa12f6ca290eb20f9bcca786e3038047fd57b21dfb6ed8e"
  },
  "id": "8LMftM0ABhu9rm_W4tGcJ",
  "tags": []
}